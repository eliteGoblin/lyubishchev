
## Idea

搭建基础框架，实现功能: daily billable; 

先不纠结于metric的细节: 过去1天，怎么算过去一天. 

## 技术选型

*  Clockify API
*  Python as Data collector
*  Data: Promscale + Timescale as DB frontend and backend
*  Monitor: Prometheus(PromQL) + Grafana
*  docker-compose run locally: docker volume or file to store Prometheus data

## 计划

*  先搭建原型, docker-compose, fake数据, 先整个跑起来，有直观感受
*  Monitor: 提取前一天billable, Grafana验证

## Infra

*  最新版本各部件
*  Containerize, 方便将来部署在k8s

## Exporter

*  Fake metric first: random;  test infra

### Implementation

*  输入前一天的所有timeEntry, 转化为data model.
*  输出到Promscale
*  允许补充旧数据? 一周之内? 
*  如何解决重复数据录入问题? 每个time entry, 都有唯一id, 在timescale之外cache此ID: cache2个月的? depends. 
    +  目前怎么简单怎么来.
    +  将来可以检查time overlap.
*  抓取前一天的time entries, 输入到timescaledb.

## Plan

0.  搭建: Python+Prometheus+Timescale+Promscale+Grafana, 
1.  Python implement data model, insert fake metric data using data model to Prom scale:
    +  Some routine
    +  Some SE, billable
2.  Query using Prometheus, Grafana dashboard
3.  Implement Clockify scraper, de-dup logic

## Future ideas

*  自动生成报告: 回顾上周.
